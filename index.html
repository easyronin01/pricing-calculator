<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Enhanced Pricing Calculator</title>\n    <script src="https://cdn.tailwindcss.com"></script>\n    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>\n    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>\n</head>\n<body class="bg-gray-100 dark:bg-gray-800 transition duration-500">\n    <div class="container mx-auto p-4">\n        <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">Pricing Calculator</h1>\n        <div class="my-4">\n            <button class="px-4 py-2 bg-blue-500 text-white rounded" id="toggle-theme">Toggle Dark/Light Mode</button>\n        </div>\n        <div>\n            <label for="seats" class="block text-gray-700 dark:text-gray-300">Number of Seats:</label>\n            <select id="seats" class="p-2 border" onchange="calculate()">\n                <option value="1">1</option>\n                <option value="2">2</option>\n                <option value="3">3</option>\n                <option value="4">4</option>\n                <option value="5">5</option>\n            </select>\n        </div>\n        <div>\n            <label for="profitMargin" class="block text-gray-700 dark:text-gray-300">Profit Margin (%):</label>\n            <input type="number" id="profitMargin" class="p-2 border" placeholder="Enter profit margin" oninput="calculate()">\n        </div>\n        <div>\n            <label for="rate" class="block text-gray-700 dark:text-gray-300">Rate:</label>\n            <input type="number" id="rate" class="p-2 border" placeholder="Daily/Hourly Rate" oninput="calculate()">\n        </div>\n        <div class="mt-4">\n            <h2 class="text-2xl font-semibold dark:text-gray-200">Total: <span id="total">$0.00</span></h2>\n            <h2 class="text-lg font-semibold dark:text-gray-200">History:</h2>\n            <ul id="history" class="list-disc list-inside"></ul>\n        </div>\n        <div class="mt-4">\n            <button class="px-4 py-2 bg-green-500 text-white rounded" id="export">Export to JSON</button>\n        </div>\n    </div>\n    <script>\n        const calculate = () => {\n            const seats = document.getElementById('seats').value;\n            const rate = parseFloat(document.getElementById('rate').value);\n            const profitMargin = parseFloat(document.getElementById('profitMargin').value);\n            if (!isNaN(rate) && !isNaN(profitMargin)) {\n                const total = (rate * seats) * (1 + profitMargin / 100);\n                document.getElementById('total').innerText = total.toFixed(2);\n                addHistory(rate, seats, profitMargin, total);\n            }\n        };\n\n        const addHistory = (rate, seats, profitMargin, total) => {\n            const history = document.getElementById('history');\n            const entry = document.createElement('li');\n            entry.innerText = `Rate: $${rate}, Seats: ${seats}, Margin: ${profitMargin}%, Total: $${total.toFixed(2)}`;\n            history.appendChild(entry);\n        };\n\n        document.getElementById('export').onclick = () => {\n            const total = document.getElementById('total').innerText;\n            const data = { total };\n            const json = JSON.stringify(data, null, 2);\n            const blob = new Blob([json], { type: 'application/json' });\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(blob);\n            link.download = 'data.json';\n            link.click();\n        };\n\n        document.getElementById('toggle-theme').onclick = () => {\n            document.body.classList.toggle('dark');\n        };\n\n        window.addEventListener('keydown', (event) => {\n            if (event.ctrlKey && event.key === 'e') {\n                document.getElementById('export').click();\n            }\n        });\n    </script>\n</body>\n</html>